

# 神书：微服务从设计到部署学习笔记

**持续更新中.....**

**不管是springCloudNetflix组件还是SpringClude阿里巴巴还是其他微服务组件无法是为了解决如下四个问题**

1. ***客户端如何访问微服务***
2. ***服务与服务之间如何通信，怎么发现***
3. ***那么多服务如何管理***
4. ***服务挂了怎么办***

**可以Netflix系组件与阿里系组件都是为了解决上述问题、**

**[神书中文版Git地址](https://docshome.gitbooks.io/microservices/content/)**

## 1. 微服务简介

### 1.1 构建单体应用

​	所谓单体应用就是说所有外部暴露的接口或者对外服务的组件都是由核心应用进行提供的。在项目早期的优点是：易于开发、易于测试、易于部署、易于维护

### 1.2走向单体地狱

​	随着时间的推移单体应用的弊端就暴露出来了.

 	1. 比如说系统变得越来越大。代码变得越来越臃肿，对于修改bug和实现新功能带来了极大的挑战
 	2. 应用的启动时间也将变得越来越长
 	3. 可靠性问题，一个功能点的异常可能会导致整个系统崩溃
 	4. 持续部署也将变得不可能
 	5. 资源发生冲突时，单体应用难以扩展（比如一个模块执行cpu密集型，另外一个模块是内存数据库适合部署到其他实例上）
 	6. 采用新的矿建非常困难

### 1.3微服务 - 解决复杂问题

 	1. 將应用程序分解为一套较小的互联服务，一个服务实现一个功能
 	2. 提供对外服务的接口
 	3. 每个实例运行在一个云虚拟主机或者一个Docke容器上

### 1.4微服务的优点

 	1. 解决了复杂问题。（应用拆分，个体开发，易维护理解）
 	2. 每个服务可以由专门的团队进行开发。
 	3. 实现微服务的福利部署

### 1.5微服务的缺点

 	1. 名称本身，偏重于微服务的规模
 	2. 是一个分布式系统，使整体变得复杂
 	3. 分区数据架构苦难
 	4. 测试复杂
 	5. 跨越多服务变更
 	6. 部署复杂

### 1.6总结

​	构建复杂的微服务本质上是复杂的、单体应用只适用于简单、轻量的程序，复杂的话微服务是一个很好的选择。尽管他有缺点和实现挑战

### 微服务实战：NGINX Plus作为反向代理服务器

​	nginx反向代理	

## 2. 使用API网关

### 2.1 简介

### 2.2客户端与微服务直接通信

### 2.3使用API网关

### 2.4API网关的优点与缺点

### 2.5实施API网关

#### 2.5.1 性能与可扩展性

#### 2.5.2使用相应式编程模型

#### 2.5.3服务调用

#### 2.5.4服务发现

#### 2.5.5处理局部故障

### 2.6总结

### 微服务实战：NGINX Plus作为API网关

## 3进程间通信

### 3.1简介

### 3.2交互方式

### 3.3定义API

### 3.4演化API

### 3.5处理局部故障

### 3.6IPC技术

### 3.7异步、基于消息的通信

### 3.8同步的请求/响应IPC

#### 3.9.1REST

#### 3.9.2Thrift

### 3.9消息格式

#### 3.10总结

### 微服务实战：NGINX与应用程序架构

## 4.服务发现

### 4.1为何使用服务发现

### 4.2客户端发现模式

### 4.3服务端发现模式

### 4.4服务注册中心

### 4.5服务注册方式

### 4.6自注册模式

#### 4.7第三方注册模式

### 微服务实战：NGINX的灵活性

### 微服务实战：NGINX的灵活性

## 5.事件驱动数据管理

### 5.1微服务和分布式数据管理问题

### 5.2事件驱动架构

### 5.3实现原子性

### 5.4使用本地事物发布事件

### 5.5挖掘数据库事务日志

### 5.6使用事件溯源

### 5.7总结

### 微服务实战：NGINX与存储优化

## 6选择部署策略

### 6.1动机

### 6.2单主机多服务实例模式

### 6.3每个主机一个服务实例模式

#### 6.3.1每个虚拟机一个服务实例模式

#### 6.3.2每个容器一个服务器实例模式

### 6.4Serverless部署

### 6.5总结

### 微服务实战：使用NGINX在不同主机上部署微服务

## 7重构单体应用为微服务

### 7.1微服务重构概述

### 7.2策略一：停止挖掘

### 7.3策略二：前后端分离

### 7.4策略三：提取服务

#### 7.4.1优先将那些模块转换为微服务

#### 7.4.2如何提取模块

### 7.5总结

### 微服务实战：用NGINX征服单体











